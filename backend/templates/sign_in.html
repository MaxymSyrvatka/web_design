{% extends "base.html" %}

{% block content %}
    <form method="POST">
      <div class="padding_container">
        <h1>Sign in</h1>
        <p>Please fill in this fields to sign in.</p>
        <div class="form_card">
            <label for="email"><b>Email</b></label>
            <div>
                <input type="text" placeholder="Email" id="email" name="username" required>
            </div>
            <label for="password"><b>Password</b></label>
            <div>
                <input type="password" placeholder="Enter Password" id="password" name="password" required>
            </div>
       </div>

        <div class="flex-row-center">
            <button type="submit" class="confirm_button" onclick="loginFunction()">Confirm</button>
            <button type="button" class="cancel_button">Cancel</button>
        </div>
      </div>
    </form>
{% endblock %}

<script>
    function loginFunction() {
        var xhttp;
        xhttp = new XMLHttpRequest();

        var data = JSON.stringify({
            username: document.getElementById("email").value,
            password: document.getElementById("password").value
        });
        alert(data.username)
        xhttp.onreadystatechange = function () {
            alert("Welcome, " + document.getElementById("email").value);
            console.log(username)
            console.log(password)
        }
        xhttp.open("POST", "http://127.0.0.1:5003/login");
        xhttp.setRequestHeader("X-CSRFToken", csrftoken);
        xhttp.setRequestHeader("Content-Type", "application/json");
        xhttp.send(data);
    }
</script>